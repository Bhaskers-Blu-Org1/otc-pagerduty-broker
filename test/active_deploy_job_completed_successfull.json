{
	"toolchain_id": "765d5ca8-3f33-4f00-b46e-1bf0d886cd76",
	"service_id": "pipeline",
	"instance_id": "123456789",
	"payload": {
		"token": "eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiI4NTk5MDE0NC1iZjQwLTRiNmUtOTc4YS1kYTUwODQzMWE5YzIiLCJzdWIiOiJmYTBjNjViMi0wZjM3LTRjNmYtOGMzOC0wYzY0NTA5YTIxYWQiLCJzY29wZSI6WyJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiLCJvcGVuaWQiXSwiY2xpZW50X2lkIjoib3RjY2xpZW50IiwiY2lkIjoib3RjY2xpZW50IiwiYXpwIjoib3RjY2xpZW50IiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInVzZXJfaWQiOiJmYTBjNjViMi0wZjM3LTRjNmYtOGMzOC0wYzY0NTA5YTIxYWQiLCJvcmlnaW4iOiJ1YWEiLCJ1c2VyX25hbWUiOiJqYXVuaW4uYkBmci5pYm0uY29tIiwiZW1haWwiOiJqYXVuaW4uYkBmci5pYm0uY29tIiwiYXV0aF90aW1lIjoxNDU0NjgzNzgxLCJyZXZfc2lnIjoiY2QyMDA1YTYiLCJpYXQiOjE0NTQ2ODM3ODEsImV4cCI6MTQ1NDcyNjk4MSwiaXNzIjoiaHR0cHM6Ly91YWEuc3RhZ2UxLm5nLmJsdWVtaXgubmV0L29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCIsIm9wZW5pZCIsIm90Y2NsaWVudCJdfQ.JxVnMDQmuQKaeL0ve3VAgFyoII2ntPQl0mvGB-_SmHY",
		"pipeline": {
			"enabled": true,
			"lastModified": 1454685426160,
			"status": "OK",
			"viewed": false,
			"credentialsId": "6d3eb4df-45ab-4468-b744-125964e7b387",
			"id": "4cd16488-b2df-4f6e-bfcf-5776f8342752",
			"custom_image_enabled": false,
			"name": "catalog-api-otc-demo-bjn02",
			"stageJobCount": 11,
			"dateCreated": 1454676323272,
			"restrictDeployments": false,
			"restrictModifications": false,
			"jazzHubProjectId": "4b31e8d8-e873-4d20-b6b9-722dc00e4ee3"
		},
		"event": "jobCompleted",
		"job": {
			"buildType": "extension",
			"fetchInput": true,
			"extComponentType": "Deployer",
			"builderId": "5dfe3812-1b80-4469-b43d-68ba8ee0929a",
			"type": "deployer.engine2",
			"cfOrgGuid": "8d34d127-d3db-43cd-808b-134b388f1646",
			"id": "696d729c-4864-448a-8736-84a3116a1961",
			"directoryOffset": "",
			"archiveDir": null,
			"triggerEnabled": false,
			"docker_image": null,
			"cfRegionId": null,
			"buildScript": "",
			"parameters": {
				"RAMPDOWN_DURATION": "1m",
				"RAMPUP_DURATION": "1m",
				"COMMAND": "#!/bin/bash\n"
			},
			"services": null,
			"artifactName": null,
			"extensionId": "ibm.devops.services.pipeline.devops.ad_start",
			"status": "CONFIGURING",
			"cfApiUrl": "https://api.stage1.ng.bluemix.net",
			"testFilePattern": null,
			"componentType": "Deployer",
			"failStage": true,
			"cfSpaceGuid": "ee20ca10-5390-4542-8b37-1fc28989b87a",
			"cfScript": null,
			"enableTests": false,
			"componentName": "Begin AD",
			"scmSource": null,
			"categories": ["deployer"],
			"triggers": [],
			"produceArtifacts": true,
			"cfAppName": null
		},
		"stage": {
			"id": "37fc2f7e-37da-49fc-a559-dfb2d3b66d0d",
			"enabled": true,
			"jobs": [{
				"buildType": "extension",
				"fetchInput": true,
				"extComponentType": "Deployer",
				"builderId": "5dfe3812-1b80-4469-b43d-68ba8ee0929a",
				"type": "deployer.engine2",
				"cfOrgGuid": "8d34d127-d3db-43cd-808b-134b388f1646",
				"id": "696d729c-4864-448a-8736-84a3116a1961",
				"directoryOffset": "",
				"archiveDir": null,
				"triggerEnabled": false,
				"docker_image": null,
				"cfRegionId": null,
				"buildScript": "",
				"parameters": {
					"RAMPDOWN_DURATION": "1m",
					"RAMPUP_DURATION": "1m",
					"COMMAND": "#!/bin/bash\n"
				},
				"services": null,
				"artifactName": null,
				"extensionId": "ibm.devops.services.pipeline.devops.ad_start",
				"status": "CONFIGURING",
				"cfApiUrl": "https://api.stage1.ng.bluemix.net",
				"testFilePattern": null,
				"componentType": "Deployer",
				"failStage": true,
				"cfSpaceGuid": "ee20ca10-5390-4542-8b37-1fc28989b87a",
				"cfScript": null,
				"enableTests": false,
				"componentName": "Begin AD",
				"scmSource": null,
				"categories": ["deployer"],
				"triggers": [],
				"produceArtifacts": true,
				"cfAppName": null
			},
			{
				"buildType": "extension",
				"fetchInput": true,
				"extComponentType": "Deployer",
				"builderId": "5dfe3812-1b80-4469-b43d-68ba8ee0929a",
				"type": "deployer.engine2",
				"cfOrgGuid": "8d34d127-d3db-43cd-808b-134b388f1646",
				"id": "37346aa5-e0a4-4287-8623-d16f6a2cec37",
				"directoryOffset": "",
				"archiveDir": null,
				"triggerEnabled": false,
				"docker_image": null,
				"cfRegionId": null,
				"buildScript": "",
				"parameters": {
					"COMMAND": "#!/bin/bash\n"
				},
				"services": null,
				"artifactName": null,
				"extensionId": "ibm.devops.services.pipeline.devops.ad_finish",
				"status": "CONFIGURING",
				"cfApiUrl": "https://api.stage1.ng.bluemix.net",
				"testFilePattern": null,
				"componentType": "Deployer",
				"failStage": true,
				"cfSpaceGuid": "ee20ca10-5390-4542-8b37-1fc28989b87a",
				"cfScript": null,
				"enableTests": false,
				"componentName": "Complete AD",
				"scmSource": null,
				"categories": ["deployer"],
				"triggers": [{
					"id": "ade17cc2-01d8-449f-b524-ee9f70995425",
					"enabled": true,
					"sourceComponentId": "696d729c-4864-448a-8736-84a3116a1961",
					"taskStatus": "SUCCESS",
					"type": "TaskTrigger"
				}],
				"produceArtifacts": true,
				"cfAppName": null
			}],
			"name": "PROD",
			"properties": [{
				"name": "CF_APP_NAME",
				"value": "undefined",
				"type": "TEXT"
			},
			{
				"name": "APP_URL",
				"value": "undefined",
				"type": "TEXT"
			},
			{
				"name": "AD_ENDPOINT",
				"value": "http://cap-sg-prd-1.integration.ibmcloud.com:15749",
				"type": "TEXT"
			},
			{
				"name": "GROUP_SIZE",
				"value": "3",
				"type": "TEXT"
			},
			{
				"name": "TARGET_PLATFORM",
				"value": "CloudFoundry",
				"type": "TEXT"
			},
			{
				"name": "TEST_RESULT_FOR_AD",
				"value": "",
				"type": "TEXT"
			}]
		},
		"toolchainId": "4b31e8d8-e873-4d20-b6b9-722dc00e4ee3",
		"execution": {
			"stageId": "37fc2f7e-37da-49fc-a559-dfb2d3b66d0d",
			"id": "8a80fe2e-2270-4c0a-a379-bf4bda75a9af",
			"duration": 60440,
			"modifiedAt": 1454685425101,
			"inputs": [{
				"revisionId": "1",
				"inputId": "4ea26b35-2bf0-4fd4-a6cf-61b5ea9c4575"
			}],
			"status": "RUNNING",
			"createdAt": 1454685424813,
			"jobExecutions": [{
				"jobId": "696d729c-4864-448a-8736-84a3116a1961",
				"organizationName": "jaunin.b@fr.ibm.com",
				"status": "SUCCESS",
				"engine": "Engine2",
				"organizationId": "8d34d127-d3db-43cd-808b-134b388f1646",
				"endTime": 1454685484138,
				"script": "#!/bin/bash\nset -e -o pipefail\nexport TASK_ID=\"e2766072-52de-4dbc-9481-680e6320c418\"\nexport BUILD_NUMBER=\"8\"\nexport BUILD_DISPLAY_NAME=\"#8\"\nexport IDS_URL=\"https://devops.stage1.ng.bluemix.net/pipelines\"\nexport IDS_SOURCE_CHANGE_SERVICE_URL=\"https://10.120.208.129:3011/api\"\nexport IDS_TEST_SERVICE_URL=\"https://10.120.208.129:3031/api\"\nexport PIPELINE_SCRIPTS_DIR=\"/opt/IBM/pipeline/bin\"\nexport PIPELINE_TOKEN=\"****\"\nexport RTC_CLI_PATH=\"/opt/IBM/RTC-SCM-Tools/jazz/scmtools/eclipse/lscm\"\nexport PIPELINE_TOOLCHAIN_ID=\"4b31e8d8-e873-4d20-b6b9-722dc00e4ee3\"\nexport TOOLCHAIN_TOKEN=\"bearer eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJmMWIzNzRhYy1kOTdkLTQyNGUtYjNiMC02NDYwMWQyMjlhNjUiLCJzdWIiOiJmYTBjNjViMi0wZjM3LTRjNmYtOGMzOC0wYzY0NTA5YTIxYWQiLCJzY29wZSI6WyJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiLCJvcGVuaWQiXSwiY2xpZW50X2lkIjoib3RjY2xpZW50IiwiY2lkIjoib3RjY2xpZW50IiwiYXpwIjoib3RjY2xpZW50IiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInVzZXJfaWQiOiJmYTBjNjViMi0wZjM3LTRjNmYtOGMzOC0wYzY0NTA5YTIxYWQiLCJvcmlnaW4iOiJ1YWEiLCJ1c2VyX25hbWUiOiJqYXVuaW4uYkBmci5pYm0uY29tIiwiZW1haWwiOiJqYXVuaW4uYkBmci5pYm0uY29tIiwiYXV0aF90aW1lIjoxNDU0NjgzNzc1LCJyZXZfc2lnIjoiY2QyMDA1YTYiLCJpYXQiOjE0NTQ2ODM3NzUsImV4cCI6MTQ1NDcyNjk3NSwiaXNzIjoiaHR0cHM6Ly91YWEuc3RhZ2UxLm5nLmJsdWVtaXgubmV0L29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCIsIm9wZW5pZCIsIm90Y2NsaWVudCJdfQ.tui3fk9ZWip4VwVMNU1qwnIAPWE-4sSWZWHwAOnPEIU\"\nexport PIPELINE_INITIAL_STAGE_EXECUTION_ID=\"8a80fe2e-2270-4c0a-a379-bf4bda75a9af\"\nexport IDS_PROJECT_NAME=\"otc-demo-bjn02\"\nexport PIPELINE_STAGE_INPUT_JOB_ID=\"5dfe3812-1b80-4469-b43d-68ba8ee0929a\"\nexport PIPELINE_STAGE_INPUT_REV=\"1\"\nexport IDS_STAGE_NAME=\"PROD\"\nexport IDS_JOB_NAME=\"Begin AD\"\nexport IDS_JOB_ID=\"696d729c-4864-448a-8736-84a3116a1961\"\nexport JOB_NAME=\"4cd16488-b2df-4f6e-bfcf-5776f8342752/696d729c-4864-448a-8736-84a3116a1961\"\nexport BUILD_ID=\"e2766072-52de-4dbc-9481-680e6320c418\"\nexport CF_ORG=\"jaunin.b@fr.ibm.com\"\nexport CF_ORGANIZATION_ID=\"8d34d127-d3db-43cd-808b-134b388f1646\"\nexport CF_SPACE=\"prod\"\nexport CF_SPACE_ID=\"ee20ca10-5390-4542-8b37-1fc28989b87a\"\nexport CF_TARGET_URL=\"https://api.stage1.ng.bluemix.net\"\nexport CF_TOKEN=\"****\"\nexport CF_CONFIG_JSON=\"{\\\"ConfigVersion\\\":3,\\\"Target\\\":\\\"https://api.stage1.ng.bluemix.net\\\",\\\"ApiVersion\\\":\\\"2.40.0\\\",\\\"AuthorizationEndpoint\\\":\\\"https://login.stage1.ng.bluemix.net/UAALoginServerWAR\\\",\\\"LoggregatorEndpoint\\\":\\\"wss://loggregator.stage1.ng.bluemix.net:443\\\",\\\"UaaEndpoint\\\":\\\"https://login.stage1.ng.bluemix.net/UAALoginServerWAR\\\",\\\"AccessToken\\\":\\\"****\\\",\\\"RefreshToken\\\":null,\\\"Expiration\\\":1454685426141,\\\"OrganizationFields\\\":{\\\"Name\\\":\\\"jaunin.b@fr.ibm.com\\\",\\\"Guid\\\":\\\"8d34d127-d3db-43cd-808b-134b388f1646\\\"},\\\"SpaceFields\\\":{\\\"Name\\\":\\\"prod\\\",\\\"Guid\\\":\\\"ee20ca10-5390-4542-8b37-1fc28989b87a\\\"}}\"\nexport IDS_VERSION=\"1\"\nexport EXT_GIT_BRANCH=\"6bd9c97c6c46d100ddd4e273502c825d7717ef82\"\nexport EXT_GIT_URL=\"https://github.com/Osthanes/activedeploy_start.git\"\nmkdir \"$TASK_ID\"\ncd \"$TASK_ID\"\nexport WORKSPACE=`readlink -f .`\njava -jar /opt/IBM/pipeline/lib/CodeStation-CLI.jar -r \"https://10.120.208.127:9444\" -u pipeline_token -p **** -a \"50e17cb0-dde8-4d2b-b820-c6cc92b8168b\" download \".\"\nexport IDS_OUTPUT_PROPS=\"CF_APP_NAME,APP_URL,AD_ENDPOINT,GROUP_SIZE,TARGET_PLATFORM,TEST_RESULT_FOR_AD\"\nexport _IDS_OUTPUT_PROPS=\"$IDS_OUTPUT_PROPS\"\nexport CF_APP_NAME=\"undefined\"\nexport APP_URL=\"undefined\"\nexport AD_ENDPOINT=\"http://cap-sg-prd-1.integration.ibmcloud.com:15749\"\nexport GROUP_SIZE=\"3\"\nexport TARGET_PLATFORM=\"CloudFoundry\"\nexport TEST_RESULT_FOR_AD=\"\"\nexport CF_APP=\"\"\nexport CF_METADATA=\"{\\\"appName\\\":null}\"\ncat > _pipeline_script.sh <<'EOF_PIPELINE_SCRIPT'\n#!/bin/bash\nset -e -o pipefail\nexport EXT_DIR=\"$TMPDIR/extension_content\"\nexport ARCHIVE_DIR=\"$TMPDIR/extension_archive\"\nmkdir -p \"$ARCHIVE_DIR\"\nexport ARCHIVE_DIR=`readlink -f $ARCHIVE_DIR`\ngit clone -q \"$EXT_GIT_URL\" \"$EXT_DIR\"\n$(cd $EXT_DIR && git checkout -q \"$EXT_GIT_BRANCH\")\nexport PATH=\"$PATH:$EXT_DIR\"\nmkdir -p ~/.cf\necho \"$CF_CONFIG_JSON\" > ~/.cf/config.json\necho \"Target: ${CF_TARGET_URL}\"\ncat > _customer_script.sh <<'EOF_CUSTOMER_SCRIPT'\n#!/bin/bash\nexport RAMPUP_DURATION=1m\nexport RAMPDOWN_DURATION=1m\nexport INIT_START_TIME=$(date +\"%s\")\n# OSSC line\ndpkg -l | grep '^ii' > $EXT_DIR/pkglist\n. $EXT_DIR/_init.sh\n# OSSC line\ndpkg -l | grep '^ii' > $EXT_DIR/pkglist2\nif [[ $DEBUG -eq 1 ]]; then\n  diff $EXT_DIR/pkglist $EXT_DIR/pkglist2\nfi\nINIT_END_TIME=$(date +\"%s\")\nINIT_EST_TIME=$(($INIT_END_TIME-$INIT_START_TIME))\necho -e \"Init runtime of `date -u -d @\"$INIT_EST_TIME\" +'%-Mm %-Ss'`\"# place command into a temp script file\ncat > script.sh << '__EOF__'\n#!/bin/bash\nfunction save_env_vars_on_exit() {\n    echo \"#!/bin/bash\" > $EXT_DIR/save_vars.sh\n    export -p >> $EXT_DIR/save_vars.sh\n}\ntrap \"save_env_vars_on_exit\" EXIT\n#!/bin/bash\n\n__EOF__\n# call the script in a subscript\ncat script.sh\n/bin/bash -e script.sh\nPIPE_SCR_RESULT=$?\n# restore the saved exported vars\nsource $EXT_DIR/save_vars.sh\nif [ $PIPE_SCR_RESULT -ne 0 ]; then\n    exit $PIPE_SCR_RESULT\nfi\nEOF_CUSTOMER_SCRIPT\nsource _customer_script.sh\ncd \"$WORKSPACE\"\nif [ -d \"$ARCHIVE_DIR\" ]; then\njava -jar /opt/IBM/pipeline/lib/CodeStation-CLI.jar -r \"https://10.120.208.127:9444\" -u pipeline_token -p \"$PIPELINE_TOKEN\" -a \"$TASK_ID\" -i '**/*' -e _pipeline_script.sh -e _customer_script.sh upload \"$ARCHIVE_DIR\"\nfi\n/opt/IBM/pipeline/bin/ids-set-env.sh 'https://devops.stage1.ng.bluemix.net/pipelines/api/notifications/stage_properties/8a80fe2e-2270-4c0a-a379-bf4bda75a9af' '****' \"$IDS_OUTPUT_PROPS\"\nEOF_PIPELINE_SCRIPT\nset +e\n/bin/bash _pipeline_script.sh\nPIPELINE_EXIT_CODE=$?\nexit $PIPELINE_EXIT_CODE\n",
				"targetUrl": "https://api.stage1.ng.bluemix.net",
				"environmentId": "ee20ca10-5390-4542-8b37-1fc28989b87a",
				"startTime": 1454685427417,
				"duration": 56721,
				"jobExecutionId": "e2766072-52de-4dbc-9481-680e6320c418",
				"artifactRevision": "8",
				"environmentName": "prod",
				"successful": true,
				"timeEstimate": 58
			},
			{
				"jobId": "37346aa5-e0a4-4287-8623-d16f6a2cec37",
				"jobExecutionId": "3889b279-cd21-405f-ab9e-3ec2ba5ee7ef",
				"organizationName": "jaunin.b@fr.ibm.com",
				"engine": "Engine2",
				"status": "QUEUED",
				"artifactRevision": "8",
				"environmentName": "prod",
				"organizationId": "8d34d127-d3db-43cd-808b-134b388f1646",
				"script": "#!/bin/bash\nset -e -o pipefail\nexport TASK_ID=\"3889b279-cd21-405f-ab9e-3ec2ba5ee7ef\"\nexport BUILD_NUMBER=\"8\"\nexport BUILD_DISPLAY_NAME=\"#8\"\nexport IDS_URL=\"https://devops.stage1.ng.bluemix.net/pipelines\"\nexport IDS_SOURCE_CHANGE_SERVICE_URL=\"https://10.120.208.129:3011/api\"\nexport IDS_TEST_SERVICE_URL=\"https://10.120.208.129:3031/api\"\nexport PIPELINE_SCRIPTS_DIR=\"/opt/IBM/pipeline/bin\"\nexport PIPELINE_TOKEN=\"****\"\nexport RTC_CLI_PATH=\"/opt/IBM/RTC-SCM-Tools/jazz/scmtools/eclipse/lscm\"\nexport PIPELINE_TOOLCHAIN_ID=\"4b31e8d8-e873-4d20-b6b9-722dc00e4ee3\"\nexport TOOLCHAIN_TOKEN=\"bearer eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiJmMWIzNzRhYy1kOTdkLTQyNGUtYjNiMC02NDYwMWQyMjlhNjUiLCJzdWIiOiJmYTBjNjViMi0wZjM3LTRjNmYtOGMzOC0wYzY0NTA5YTIxYWQiLCJzY29wZSI6WyJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiLCJvcGVuaWQiXSwiY2xpZW50X2lkIjoib3RjY2xpZW50IiwiY2lkIjoib3RjY2xpZW50IiwiYXpwIjoib3RjY2xpZW50IiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInVzZXJfaWQiOiJmYTBjNjViMi0wZjM3LTRjNmYtOGMzOC0wYzY0NTA5YTIxYWQiLCJvcmlnaW4iOiJ1YWEiLCJ1c2VyX25hbWUiOiJqYXVuaW4uYkBmci5pYm0uY29tIiwiZW1haWwiOiJqYXVuaW4uYkBmci5pYm0uY29tIiwiYXV0aF90aW1lIjoxNDU0NjgzNzc1LCJyZXZfc2lnIjoiY2QyMDA1YTYiLCJpYXQiOjE0NTQ2ODM3NzUsImV4cCI6MTQ1NDcyNjk3NSwiaXNzIjoiaHR0cHM6Ly91YWEuc3RhZ2UxLm5nLmJsdWVtaXgubmV0L29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCIsIm9wZW5pZCIsIm90Y2NsaWVudCJdfQ.tui3fk9ZWip4VwVMNU1qwnIAPWE-4sSWZWHwAOnPEIU\"\nexport PIPELINE_INITIAL_STAGE_EXECUTION_ID=\"8a80fe2e-2270-4c0a-a379-bf4bda75a9af\"\nexport IDS_PROJECT_NAME=\"otc-demo-bjn02\"\nexport PIPELINE_STAGE_INPUT_JOB_ID=\"5dfe3812-1b80-4469-b43d-68ba8ee0929a\"\nexport PIPELINE_STAGE_INPUT_REV=\"1\"\nexport IDS_STAGE_NAME=\"PROD\"\nexport IDS_JOB_NAME=\"Complete AD\"\nexport IDS_JOB_ID=\"37346aa5-e0a4-4287-8623-d16f6a2cec37\"\nexport JOB_NAME=\"4cd16488-b2df-4f6e-bfcf-5776f8342752/37346aa5-e0a4-4287-8623-d16f6a2cec37\"\nexport BUILD_ID=\"3889b279-cd21-405f-ab9e-3ec2ba5ee7ef\"\nexport CF_ORG=\"jaunin.b@fr.ibm.com\"\nexport CF_ORGANIZATION_ID=\"8d34d127-d3db-43cd-808b-134b388f1646\"\nexport CF_SPACE=\"prod\"\nexport CF_SPACE_ID=\"ee20ca10-5390-4542-8b37-1fc28989b87a\"\nexport CF_TARGET_URL=\"https://api.stage1.ng.bluemix.net\"\nexport CF_TOKEN=\"****\"\nexport CF_CONFIG_JSON=\"{\\\"ConfigVersion\\\":3,\\\"Target\\\":\\\"https://api.stage1.ng.bluemix.net\\\",\\\"ApiVersion\\\":\\\"2.40.0\\\",\\\"AuthorizationEndpoint\\\":\\\"https://login.stage1.ng.bluemix.net/UAALoginServerWAR\\\",\\\"LoggregatorEndpoint\\\":\\\"wss://loggregator.stage1.ng.bluemix.net:443\\\",\\\"UaaEndpoint\\\":\\\"https://login.stage1.ng.bluemix.net/UAALoginServerWAR\\\",\\\"AccessToken\\\":\\\"****\\\",\\\"RefreshToken\\\":null,\\\"Expiration\\\":1454685485121,\\\"OrganizationFields\\\":{\\\"Name\\\":\\\"jaunin.b@fr.ibm.com\\\",\\\"Guid\\\":\\\"8d34d127-d3db-43cd-808b-134b388f1646\\\"},\\\"SpaceFields\\\":{\\\"Name\\\":\\\"prod\\\",\\\"Guid\\\":\\\"ee20ca10-5390-4542-8b37-1fc28989b87a\\\"}}\"\nexport IDS_VERSION=\"1\"\nexport EXT_GIT_BRANCH=\"ae77aad9a22eb77522b321d363fd88566fb1b7ee\"\nexport EXT_GIT_URL=\"https://github.com/Osthanes/activedeploy_finish.git\"\nmkdir \"$TASK_ID\"\ncd \"$TASK_ID\"\nexport WORKSPACE=`readlink -f .`\njava -jar /opt/IBM/pipeline/lib/CodeStation-CLI.jar -r \"https://10.120.208.127:9444\" -u pipeline_token -p **** -a \"50e17cb0-dde8-4d2b-b820-c6cc92b8168b\" download \".\"\nexport IDS_OUTPUT_PROPS=\"TARGET_PLATFORM,CF_APP_NAME,APP_URL,GROUP_SIZE,TEST_RESULT_FOR_AD,AD_ENDPOINT\"\nexport _IDS_OUTPUT_PROPS=\"$IDS_OUTPUT_PROPS\"\nexport TARGET_PLATFORM=\"CloudFoundry\"\nexport CF_APP_NAME=\"undefined\"\nexport APP_URL=\"undefined\"\nexport GROUP_SIZE=\"3\"\nexport TEST_RESULT_FOR_AD=\"\"\nexport AD_ENDPOINT=\"http://cap-sg-prd-1.integration.ibmcloud.com:15749\"\nexport CF_APP=\"\"\nexport CF_METADATA=\"{\\\"appName\\\":null,\\\"appGuid\\\":null}\"\ncat > _pipeline_script.sh <<'EOF_PIPELINE_SCRIPT'\n#!/bin/bash\nset -e -o pipefail\nexport EXT_DIR=\"$TMPDIR/extension_content\"\nexport ARCHIVE_DIR=\"$TMPDIR/extension_archive\"\nmkdir -p \"$ARCHIVE_DIR\"\nexport ARCHIVE_DIR=`readlink -f $ARCHIVE_DIR`\ngit clone -q \"$EXT_GIT_URL\" \"$EXT_DIR\"\n$(cd $EXT_DIR && git checkout -q \"$EXT_GIT_BRANCH\")\nexport PATH=\"$PATH:$EXT_DIR\"\nmkdir -p ~/.cf\necho \"$CF_CONFIG_JSON\" > ~/.cf/config.json\necho \"Target: ${CF_TARGET_URL}\"\ncat > _customer_script.sh <<'EOF_CUSTOMER_SCRIPT'\n#!/bin/bash\nset +x\nset +e\nexport RAMPDOWN_DURATION=#RAMPDOWN_DURATION#\nexport INIT_START_TIME=$(date +\"%s\")\n# OSSC line\ndpkg -l | grep '^ii' > $EXT_DIR/pkglist\n. $EXT_DIR/_init.sh\n# OSSC line\ndpkg -l | grep '^ii' > $EXT_DIR/pkglist2\nif [[ $DEBUG -eq 1 ]]; then\n  diff $EXT_DIR/pkglist $EXT_DIR/pkglist2\nfi\nINIT_END_TIME=$(date +\"%s\")\nINIT_EST_TIME=$(($INIT_END_TIME-$INIT_START_TIME))\necho -e \"Init runtime of `date -u -d @\"$INIT_EST_TIME\" +'%-Mm %-Ss'`\"# place command into a temp script file\ncat > script.sh << '__EOF__'\n#!/bin/bash\nfunction save_env_vars_on_exit() {\n    echo \"#!/bin/bash\" > $EXT_DIR/save_vars.sh\n    export -p >> $EXT_DIR/save_vars.sh\n}\ntrap \"save_env_vars_on_exit\" EXIT\n#!/bin/bash\n\n__EOF__\n# call the script in a subscript\n/bin/bash -e script.sh\nPIPE_SCR_RESULT=$?\n# restore the saved exported vars\nsource $EXT_DIR/save_vars.sh\nif [ $PIPE_SCR_RESULT -ne 0 ]; then\n    exit $PIPE_SCR_RESULT\nfi\nEOF_CUSTOMER_SCRIPT\nsource _customer_script.sh\ncd \"$WORKSPACE\"\nif [ -d \"$ARCHIVE_DIR\" ]; then\njava -jar /opt/IBM/pipeline/lib/CodeStation-CLI.jar -r \"https://10.120.208.127:9444\" -u pipeline_token -p \"$PIPELINE_TOKEN\" -a \"$TASK_ID\" -i '**/*' -e _pipeline_script.sh -e _customer_script.sh upload \"$ARCHIVE_DIR\"\nfi\n/opt/IBM/pipeline/bin/ids-set-env.sh 'https://devops.stage1.ng.bluemix.net/pipelines/api/notifications/stage_properties/8a80fe2e-2270-4c0a-a379-bf4bda75a9af' '****' \"$IDS_OUTPUT_PROPS\"\nEOF_PIPELINE_SCRIPT\nset +e\n/bin/bash _pipeline_script.sh\nPIPELINE_EXIT_CODE=$?\nexit $PIPELINE_EXIT_CODE\n",
				"timeEstimate": 52,
				"targetUrl": "https://api.stage1.ng.bluemix.net",
				"environmentId": "ee20ca10-5390-4542-8b37-1fc28989b87a"
			}],
			"number": 8,
			"properties": [{
				"name": "TARGET_PLATFORM",
				"value": "CloudFoundry",
				"type": "TEXT"
			},
			{
				"name": "CF_APP_NAME",
				"value": "undefined",
				"type": "TEXT"
			},
			{
				"name": "APP_URL",
				"value": "undefined",
				"type": "TEXT"
			},
			{
				"name": "GROUP_SIZE",
				"value": "3",
				"type": "TEXT"
			},
			{
				"name": "TEST_RESULT_FOR_AD",
				"value": "",
				"type": "TEXT"
			},
			{
				"name": "AD_ENDPOINT",
				"value": "http://cap-sg-prd-1.integration.ibmcloud.com:15749",
				"type": "TEXT"
			}],
			"successful": false,
			"running": true,
			"requestedBy": "fa0c65b2-0f37-4c6f-8c38-0c64509a21ad"
		},
		"id": "4cd16488-b2df-4f6e-bfcf-5776f8342752",
		"toolchain_id": "4b31e8d8-e873-4d20-b6b9-722dc00e4ee3",
		"id_type": "tool_id",
		"timestamp": 1454685485524
	}
}